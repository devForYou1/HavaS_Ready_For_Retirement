<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שאלון המלצות קורסים</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            direction: rtl; /* Right-to-left for Hebrew */
            text-align: right; /* Align text to the right for Hebrew */
        }
        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .question-card {
            border: 1:px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            background-color: #f8fafc; /* Lighter background for question cards */
            opacity: 0; /* Initially hidden for fade-in effect */
            transform: translateY(20px); /* Initially moved down for slide-up effect */
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .question-card.fade-in {
            opacity: 1;
            transform: translateY(0);
        }
        .question-card.fade-out {
            opacity: 0;
            transform: translateY(-20px); /* Move up for fade-out effect */
        }
        .answer-option {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border: 1px solid transparent; /* Default transparent border */
        }
        .answer-option:hover {
            background-color: #eff6ff; /* Light blue on hover */
        }
        .answer-option.selected {
            background-color: #dbeafe; /* Light blue when selected */
            border-color: #3b82f6; /* Blue border when selected */
        }
        .answer-option input[type="radio"] {
            margin-left: 0.75rem; /* Space for RTL */
            margin-right: 0;
            accent-color: #2563eb; /* Blue accent color */
        }
        .recommendation-card {
            background-color: #f0f9ff; /* Very light blue for recommendations */
            border: 1px solid #bfdbfe;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            opacity: 0; /* Initially hidden for fade-in effect */
            transform: translateY(20px); /* Initially moved down for slide-up effect */
        }
        .recommendation-card .course-name {
            font-weight: 600;
            color: #1e3a8a; /* Dark blue text */
        }
        .recommendation-card .match-percentage {
            font-weight: 700;
            color: #16a34a; /* Green for percentage */
        }
        /* Animation for recommendations appearing */
        @keyframes fadeInSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .recommendation-card.show {
            animation: fadeInSlideUp 0.5s ease-out forwards;
        }

        /* Custom style for social cards within the quiz result section */
        .result-social-card {
            width: 3.5rem; /* Smaller width for top cards to be circular */
            height: 3.5rem; /* Smaller height for top cards to be circular */
            border-radius: 9999px; /* Make them perfectly round */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0; /* Prevent shrinking in flex container */
            transition: all 0.3s ease-in-out;
        }
        .result-social-card:hover {
            transform: translateY(-4px); /* Slightly more pronounced lift */
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15); /* Stronger shadow */
        }
        .result-social-card svg, .result-social-card img {
            width: 2.5rem; /* Smaller icons */
            height: 2.5rem; /* Smaller icons */
        }
        .result-social-card span { /* Hidden text for these cards */
            display: none;
        }
        .back-button {
            display: block; /* Make it a block-level element */
            width: fit-content; /* Adjust width to content */
            margin: 2rem auto 0 auto; /* Center it and add vertical spacing */
            padding: 0.8rem 1.5rem;
            background-color: #4CAF50; /* Green color for back button */
            color: white;
            font-weight: 600;
            text-align: center;
            border-radius: 0.75rem; /* Rounded corners */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
            text-decoration: none; /* Remove underline for links */
            font-size: 1rem;
        }
        .back-button:hover {
            background-color: #45a049; /* Slightly darker green on hover */
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

    </style>
</head>
<body class="p-4">
    <div class="container">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">שאלון המלצות קורסים לארגון</h1>
        <p class="text-gray-600 text-center mb-8">ענה/י על 5 השאלות הבאות כדי לקבל המלצה על הקורסים המתאימים ביותר לעובדי הארגון שלך.</p>

        <!-- Progress Bar -->
        <div class="progress-bar-container mb-8 bg-gray-200 rounded-full h-3">
            <div id="progress-bar-fill" class="h-full bg-blue-500 rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
        </div>

        <div id="quiz-question-display">
            <!-- Current question will be dynamically loaded here by JavaScript -->
        </div>

        <div id="recommendations" class="mt-10 hidden">
            <!-- Social Icons Section (after quiz completion) -->
            <div class="mt-8 pt-4 border-t border-gray-200 flex justify-center gap-4 mb-8">
                <!-- WhatsApp -->
                <a href="https://wa.me/972529252015?text=%D7%A9%D7%9C%D7%95%D7%9D%20%D7%97%D7%95%D7%94%21%0A%D7%A9%D7%9E%D7%A2%D7%AA%D7%99%20%D7%A2%D7%9C%20%D7%A7%D7%95%D7%A8%D7%A1%D7%99%20%D7%94%D7%A4%D7%A8%D7%99%D7%A9%D7%94%20%D7%A9%D7%90%D7%AA%20%D7%9E%D7%A2%D7%91%D7%99%D7%A8%D7%94%20%D7%95%D7%90%D7%A9%D7%9E%D7%97%20%D7%9C%D7%A7%D7%91%D7%9C%20%D7%A4%D7%A8%D7%98%D7%99%D7%9D%20%D7%A0%D7%95%D7%A1%D7%A4%D7%99%D7%9D%20%F0%9F%98%81" target="_blank" class="result-social-card text-white bg-gradient-to-br from-green-400 to-green-500">
                    <img src="https://dl.dropboxusercontent.com/scl/fi/5bb39446vijibzkxcjgq3/whatsapp-1.png?rlkey=ietiz6gmb0eu58ugvo55nxgq2&raw=1" alt="אייקון ווצאפ" class="object-contain" onerror="this.onerror=null;this.src='https://placehold.co/100x100/2f7f9e/FFFFFF?text=WA'">
                </a>
                <!-- Phone -->
                <a href="tel:+972529252015" target="_blank" class="result-social-card text-white bg-gradient-to-br from-purple-400 to-purple-500">
                    <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20.01 15.38C18.79 15.38 17.58 15.19 16.48 14.82C16.14 14.71 15.76 14.8 15.49 15.08L13.19 17.38C10.59 16.03 8.35 13.79 7 11.19L9.38 8.89C9.67 8.62 9.75 8.23 9.64 7.9C9.27 6.8 9.08 5.59 9.08 4.38C9.08 3.59 8.42 3 7.63 3H4.38C3.59 3 3 3.59 3 4.38C3 13.52 10.48 21 19.62 21C20.41 21 21 20.41 21 19.62V16.37C21 15.58 20.41 15.38 20.01 15.38Z"/>
                    </svg>
                </a>
                <!-- Email -->
                <a href="mailto:ready4retire@gmail.com" target="_blank" class="result-social-card text-white bg-gradient-to-br from-red-500 to-red-600">
                    <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 6C22 5.44772 21.5523 5 21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H21C21.5523 19 22 18.5523 22 18V6ZM20 7.23892L12.0712 13.1852C12.0205 13.2231 11.9795 13.2231 11.9288 13.1852L4 7.23892V17H20V7.23892ZM4 6.43137L11.9288 12.3776L20 6.43137L20 7.23892L11.9288 13.1852C11.9795 13.2231 12.0205 13.2231 11.9795 13.1852L4 7.23892L4 6.43137Z"/>
                    </svg>
                </a>
                <!-- Facebook -->
                <a href="https://www.facebook.com/share/1AwxF7mSpK/?mibextid=wwXIfr" target="_blank" class="result-social-card text-white bg-gradient-to-br from-blue-400 to-blue-500">
                    <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 12C22 6.477 17.523 2 12 2S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.875V14.808h-2.92V12h2.92V9.704c0-2.89 1.625-4.483 4.363-4.483 1.257 0 2.345.223 2.651.323v2.867h-1.79c-1.401 0-1.676.668-1.676 1.642V12h3.22l-.527 2.808H14.07V21.875C18.343 21.128 22 16.991 22 12z"/>
                    </svg>
                </a>
                <!-- LinkedIn -->
                <a href="https://www.linkedin.com/in/chana-shoshani-swartz?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app" target="_blank" class="result-social-card text-white bg-gradient-to-br from-indigo-400 to-indigo-500">
                    <!-- White LinkedIn SVG icon -->
                    <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M19 0H5C2.239 0 0 2.239 0 5V19C0 21.761 2.239 24 5 24H19C21.761 24 24 21.761 24 19V5C24 2.239 21.761 0 19 0ZM8 19H5V8H8V19ZM6.5 6.732C5.534 6.732 4.75 5.942 4.75 4.974C4.75 4.006 5.534 3.216 6.5 3.216C7.466 3.216 8.25 4.006 8.25 4.974C8.25 5.942 7.466 6.732 6.5 6.732ZM20 19H17V13.399C17 12.009 16.983 10.219 15.142 10.219C13.272 10.219 13 11.758 13 13.268V19H10V8H13V9.673H13.047C13.344 9.124 13.963 8.32 15.53 8.32C18.736 8.32 19 10.912 19 12.772V19H20Z" fill="white"/>
                    </svg>
                </a>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">המלצות הקורסים עבור הארגון שלך:</h2>
            <div id="top-recommendation-list">
                <!-- Top recommendations will be dynamically loaded here by JavaScript -->
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4 text-center">קורסים נוספים שאולי יעניינו אותך:</h2>
            <div id="additional-recommendation-list">
                <!-- Additional recommendations will be dynamically loaded here by JavaScript -->
            </div>

            <!-- Back to Main Page Button -->
            <a href="index.html" class="back-button">חזרה לעמוד הראשי</a>
        </div>
    </div>

    <script>
        // Define the list of available courses with their associated tags
        // Tags are refined to distinguish between general HR, termination, general pension, and specific retirement topics.
        const courses = [
            { name: "אתגרי העסקה במאה 21", tags: ["HR_General", "Employment_Trends"] },
            { name: "תהליכי סיומי העסקה פיטורים התפטרות ופיצויי פיטורים", tags: ["HR_Termination", "Legal_Employment", "Severance_Pay"] },
            { name: "תכנון תהליכי הפרישה בארגונים", tags: ["HR_Retirement_Planning", "Organizational_Retirement"] },
            { name: "עולם הפנסיה", tags: ["General_Pension", "Finance_Basics"] },
            { name: "זכויות וזכאויות עובדים מבוגרים", tags: ["Elderly_Employee_Rights", "Legal_Elderly"] },
            { name: "תפקיד אנשי המשאן בליווי עובדים לקראת פרישה", tags: ["HR_Retirement_Guidance", "Employee_Support_Retirement"] },

            { name: "אתגרי הפרישה בעידן 100 שנות חיים", tags: ["Retirement_Challenges", "Longevity_Planning"] },
            { name: "הכנה רגשית לפרישה", tags: ["Emotional_Retirement_Prep", "Wellbeing_Retirement"] },
            { name: "חשיבות תכנון פיננסי בפרישה", tags: ["Financial_Retirement_Planning", "Retirement_Finance"] },
            { name: "קצבת אזרח ותיק", tags: ["Senior_Citizen_Benefits", "Social_Security_Benefits"] },
            { name: "צוואות ירושות ייפוי כוח מתמשך", tags: ["Wills_Inheritance_Legal", "Power_Of_Attorney"] },
            { name: "עולם קרנות הפנסיה (ותיקה חדשה ותקציבית)", tags: ["Pension_Funds_Types", "Advanced_Pension"] },
            { name: "העברה בינדורית בקופות הפנסיה", tags: ["Intergenerational_Pension", "Pension_Inheritance"] },
            { name: "זכויות וזכאויות גיל שלישי", tags: ["Third_Age_Rights", "Legal_Elderly"] },
            { name: "התמודדות עם שינוי", tags: ["Coping_Change", "Personal_Development_Retirement"] },
            { name: "זכויות וזכאויות בעת סיום העסקה - כל מה שחשוב לדעת", tags: ["Termination_Rights_Legal", "Employment_Law_Termination"] }
        ];

        // Master list of all possible questions, categorized by their primary focus
        const allPossibleQuestions = [
            // Question 0 (Initial filter) - This question determines the quiz path
            {
                id: "Q0",
                question: "מהו תפקידך העיקרי בארגון בהקשר להכשרת עובדים?",
                category: "initial_filter",
                answers: [
                    { text: "מנהל/ת משאבי אנוש (HR)", focus: "HR_INITIAL_CHOICE", scoreMap: { HR_General: 25, HR_Termination: 25, HR_Retirement_Planning: 20, HR_Retirement_Guidance: 20, Legal_Employment: 15 } },
                    { text: "מנהל/ת צוות המעוניין/ת לתמוך בעובדים לקראת סיום/פרישה", focus: "EMPLOYEE_SUPPORT_PATH", scoreMap: { Employee_Support_Retirement: 25, Retirement_Challenges: 25, Emotional_Retirement_Prep: 25, Financial_Retirement_Planning: 25, Coping_Change: 20 } },
                    { text: "יועץ/ת חיצוני/ת לארגונים", focus: "CONSULTANT_PATH", scoreMap: { HR_General: 15, HR_Termination: 15, HR_Retirement_Planning: 15, Legal_Employment: 15, Retirement_Challenges: 15, Financial_Retirement_Planning: 15 } },
                    { text: "אחר (לדוגמה: מנהל כספים, מנהל הדרכה כללי)", focus: "OTHER_PATH", scoreMap: { General_Pension: 10, Finance_Basics: 10, Financial_Retirement_Planning: 10, Organizational_Retirement: 10, Employment_Trends: 5 } }
                ]
            },
            // HR Initial Choice Question (Q1 after Q0 if HR is selected)
            {
                id: "Q_HR_INITIAL_CHOICE",
                question: "כמנהל/ת משאבי אנוש, מהו התחום המרכזי שבו אתה/את רוצה לחזק את הידע והכלים בארגון?",
                category: "HR_INITIAL_CHOICE",
                answers: [
                    { text: "ניהול תהליכי סיום העסקה (פיטורים, התפטרות)", focus: "HR_TERMINATION_FINAL_PATH", scoreMap: { HR_Termination: 40, Legal_Employment: 40, Severance_Pay: 40, Termination_Rights_Legal: 40, Employment_Law_Termination: 40, HR_General: 20 } },
                    { text: "ליווי והכנת עובדים לפרישה", focus: "HR_RETIREMENT_FINAL_PATH", scoreMap: { HR_Retirement_Planning: 40, HR_Retirement_Guidance: 40, Employee_Support_Retirement: 40, Retirement_Challenges: 30, Emotional_Retirement_Prep: 30, Financial_Retirement_Planning: 30, General_Pension: 20, Wellbeing_Retirement: 20, Longevity_Planning: 20, Life_Planning: 20, Senior_Citizen_Benefits: 15, Wills_Inheritance_Legal: 15 } },
                    { text: "שני התחומים רלוונטיים באותה מידה / אתגרי HR כלליים", focus: "HR_MIXED_FINAL_PATH", scoreMap: { HR_General: 30, HR_Termination: 20, HR_Retirement_Planning: 20, Employment_Trends: 20, Legal_Employment: 15, Financial_Retirement_Planning: 15, Employee_Support_Retirement: 15 } }
                ]
            },
            // HR_TERMINATION_FINAL_PATH Specific Questions (these are the 3 questions after Q_HR_INITIAL_CHOICE)
            {
                id: "Q1_HR_TERM_SPEC",
                question: "באיזה היבט של סיום העסקה נדרש חיזוק עיקרי בארגון?",
                category: "HR_TERMINATION_FINAL_PATH",
                answers: [
                    { text: "היבטים משפטיים ורגולציה (פיטורים, פיצויים)", scoreMap: { Legal_Employment: 50, Severance_Pay: 50, Termination_Rights_Legal: 50, Employment_Law_Termination: 50 } },
                    { text: "השפעה על מורל העובדים והמוניטין הארגוני", scoreMap: { HR_Termination: 40, Employment_Trends: 30, HR_General: 30 } },
                    { text: "ניהול נכון של תהליך סיום העסקה מרגע ההחלטה ועד לניתוק", scoreMap: { HR_Termination: 50, Organizational_Retirement: 30, Employee_Support_Retirement: 20 } }
                ]
            },
            {
                id: "Q2_HR_TERM_SPEC",
                question: "אילו כלים משפטיים ורגולטוריים חיוניים לכם בתהליכי סיום העסקה?",
                category: "HR_TERMINATION_FINAL_PATH",
                answers: [
                    { text: "ייעוץ כללי ועדכונים בנושאי דיני עבודה", scoreMap: { Legal_Employment: 50, HR_General: 40, Employment_Law_Termination: 40 } },
                    { text: "טיפול במקרים ספציפיים של פיטורים/התפטרות מורכבים", scoreMap: { HR_Termination: 50, Severance_Pay: 50, Termination_Rights_Legal: 50 } },
                    { text: "היבטי פיצויי פיטורים, פנסיה וחישובי זכויות מורכבים", scoreMap: { Severance_Pay: 50, Legal_Employment: 40, General_Pension: 30, Financial_Retirement_Planning: 30 } }
                ]
            },
            {
                id: "Q3_HR_TERM_SPEC",
                question: "כיצד תרצו לשפר את ניהול המעברים הארגוניים סביב סיום העסקה?",
                category: "HR_TERMINATION_FINAL_PATH",
                answers: [
                    { text: "גיבוש מדיניות ברורה ומותאמת לניהול סיומי העסקה", scoreMap: { HR_Termination: 50, Organizational_Retirement: 40, HR_General: 30 } },
                    { text: "הטמעת כלים ושיטות ליווי פרטני לעובדים בתהליכי מעבר", scoreMap: { Employee_Support_Retirement: 40, HR_Retirement_Guidance: 30, Emotional_Retirement_Prep: 20, Coping_Change: 20 } },
                    { text: "חיזוק הידע המשפטי והרגולטורי של צוותי משאבי אנוש ומנהלים", scoreMap: { Legal_Employment: 50, Employment_Law_Termination: 50, Termination_Rights_Legal: 40 } }
                ]
            },
            // HR_RETIREMENT_FINAL_PATH Specific Questions (these are the 3 questions after Q_HR_INITIAL_CHOICE)
            {
                id: "Q1_HR_RET_SPEC",
                question: "מהו האתגר המרכזי בארגון בהכנת עובדים לפרישה?",
                category: "HR_RETIREMENT_FINAL_PATH",
                answers: [
                    { text: "הכנה פיננסית מספקת והבנת זכויות פנסיוניות", scoreMap: { Financial_Retirement_Planning: 50, Retirement_Finance: 50, General_Pension: 40, Pension_Funds_Types: 40, Senior_Citizen_Benefits: 30 } },
                    { text: "התמודדות רגשית וחברתית עם המעבר והשינוי באורח החיים", scoreMap: { Emotional_Retirement_Prep: 50, Wellbeing_Retirement: 50, Coping_Change: 50, Personal_Development_Retirement: 40, Retirement_Challenges: 30 } },
                    { text: "הבנת זכויות סוציאליות, בירוקרטיה והיבטים משפטיים של הגיל השלישי", scoreMap: { Senior_Citizen_Benefits: 40, Social_Security_Benefits: 40, Elderly_Employee_Rights: 40, Legal_Elderly: 40, Third_Age_Rights: 30, Wills_Inheritance_Legal: 20 } }
                ]
            },
            {
                id: "Q2_HR_RET_SPEC",
                question: "באילו תחומי תוכן ספציפיים על הארגון להעשיר את הידע של עובדים פורשים?",
                category: "HR_RETIREMENT_FINAL_PATH",
                answers: [
                    { text: "הבנת סוגי קרנות פנסיה (ותיקה, חדשה, תקציבית) והבחירה ביניהן", scoreMap: { Pension_Funds_Types: 50, Advanced_Pension: 50, General_Pension: 40 } },
                    { text: "העברה בינדורית של כספי פנסיה וביטוח (ירושה פנסיונית)", scoreMap: { Intergenerational_Pension: 50, Pension_Inheritance: 50, Wills_Inheritance_Legal: 40, Power_Of_Attorney: 30 } },
                    { text: "תכנון נכסים ועיזבון (צוואות, ירושות, ייפויי כוח מתמשך)", scoreMap: { Wills_Inheritance_Legal: 50, Power_Of_Attorney: 50, Legal_Elderly: 40, Pension_Inheritance: 30 } }
                ]
            },
            {
                id: "Q3_HR_RET_SPEC",
                question: "כיצד תרצו למסד את תהליך הליווי והתמיכה בפורשים בארגון?",
                category: "HR_RETIREMENT_FINAL_PATH",
                answers: [
                    { text: "סדנאות הכנה רגשית וחברתית להתמודדות עם השינוי", scoreMap: { Emotional_Retirement_Prep: 50, Wellbeing_Retirement: 50, Coping_Change: 40, Employee_Support_Retirement: 30 } },
                    { text: "ייעוץ פרטני לתכנון פיננסי מקיף", scoreMap: { Financial_Retirement_Planning: 50, Retirement_Finance: 40, General_Pension: 30 } },
                    { text: "מידע מרוכז ומעודכן על כלל הזכויות וההטבות המגיעות להם", scoreMap: { Senior_Citizen_Benefits: 40, Social_Security_Benefits: 40, Elderly_Employee_Rights: 40, Third_Age_Rights: 40, Legal_Elderly: 30 } }
                ]
            },
            // HR_MIXED_FINAL_PATH Specific Questions (these are the 3 questions after Q_HR_INITIAL_CHOICE)
            {
                id: "Q1_HR_MIX",
                question: "מתוך אתגרי ה-HR בארגון, איזה נושא דורש התייחסות מיידית בהכשרות?",
                category: "HR_MIXED_FINAL_PATH",
                answers: [
                    { text: "התמודדות עם שינויים בשוק העבודה וניהול סיום העסקה", scoreMap: { HR_General: 30, Employment_Trends: 30, HR_Termination: 30, Legal_Employment: 30, Termination_Rights_Legal: 30 } },
                    { text: "הכנה כוללת של עובדים לפרישה וליווי אישי", scoreMap: { HR_Retirement_Planning: 30, HR_Retirement_Guidance: 30, Employee_Support_Retirement: 30, Emotional_Retirement_Prep: 25, Financial_Retirement_Planning: 25 } },
                    { text: "העמקת ידע בנושאי פנסיה וזכויות עובדים מבוגרים", scoreMap: { General_Pension: 30, Finance_Basics: 25, Elderly_Employee_Rights: 25, Legal_Elderly: 25, Senior_Citizen_Benefits: 25 } }
                ]
            },
            {
                id: "Q2_HR_MIX",
                question: "איזה ידע חיוני חסר כיום למנהלים בארגונך לצורך תמיכה בעובדים במעברים?",
                category: "HR_MIXED_FINAL_PATH",
                answers: [
                    { text: "כיצד להתנהל מול עובדים בתהליכי פיטורים/התפטרות", scoreMap: { HR_Termination: 30, Organizational_Retirement: 25, Employee_Support_Retirement: 20 } },
                    { text: "כיצד לייעץ בנושאי פנסיה וחישוב זכויות פרישה", scoreMap: { Financial_Retirement_Planning: 30, General_Pension: 30, Retirement_Finance: 25, Pension_Funds_Types: 25 } },
                    { text: "כיצד לתמוך רגשית ולסייע בהתמודדות עם שינוי קריירה/חיים", scoreMap: { Emotional_Retirement_Prep: 30, Coping_Change: 30, Wellbeing_Retirement: 25, Employee_Support_Retirement: 25 } }
                ]
            },
            {
                id: "Q3_HR_MIX",
                question: "מהו הצעד הארגוני החשוב ביותר לחיזוק רווחת העובדים במעברים משמעותיים (סיום/פרישה)?",
                category: "HR_MIXED_FINAL_PATH",
                answers: [
                    { text: "הטמעת נהלים ברורים ומקיפים לטיפול במעברי עובדים", scoreMap: { HR_General: 30, Organizational_Retirement: 30, HR_Termination: 20, HR_Retirement_Planning: 20 } },
                    { text: "העצמת היכולת של הארגון לספק ייעוץ משפטי ופיננסי פנים-ארגוני", scoreMap: { Legal_Employment: 30, Financial_Retirement_Planning: 30, General_Pension: 25, Wills_Inheritance_Legal: 20 } },
                    { text: "פיתוח תוכניות ליווי והכשרה פרטניות לעובדים עוברים/פורשים", scoreMap: { Employee_Support_Retirement: 30, HR_Retirement_Guidance: 30, Emotional_Retirement_Prep: 25, Coping_Change: 25 } }
                ]
            },
            // Employee Support Path Questions (these are the 4 questions after Q0)
            {
                id: "Q1_EMP_SUP",
                question: "מהו האתגר המרכזי שאתם מזהים אצל עובדים המתקרבים לפרישה בארגונכם?",
                category: "EMPLOYEE_SUPPORT_PATH",
                answers: [
                    { text: "הכנה פיננסית מספקת והבנת זכויות פנסיוניות", scoreMap: { Financial_Retirement_Planning: 50, Retirement_Finance: 50, General_Pension: 40, Pension_Funds_Types: 40, Senior_Citizen_Benefits: 30 } },
                    { text: "התמודדות רגשית וחברתית עם המעבר והשינוי באורח החיים", scoreMap: { Emotional_Retirement_Prep: 50, Wellbeing_Retirement: 50, Coping_Change: 50, Personal_Development_Retirement: 40, Retirement_Challenges: 30 } },
                    { text: "הבנת זכויות סוציאליות, בירוקרטיה והיבטים משפטיים של הגיל השלישי", scoreMap: { Senior_Citizen_Benefits: 40, Social_Security_Benefits: 40, Elderly_Employee_Rights: 40, Legal_Elderly: 40, Third_Age_Rights: 30, Wills_Inheritance_Legal: 20 } }
                ]
            },
            {
                id: "Q2_EMP_SUP",
                question: "באילו נושאים פיננסיים ספציפיים עובדים נדרשים להעמיק לקראת פרישה?",
                category: "EMPLOYEE_SUPPORT_PATH",
                answers: [
                    { text: "הבנת סוגי קרנות פנסיה (ותיקה, חדשה, תקציבית) והבחירה ביניהן", scoreMap: { Pension_Funds_Types: 50, Advanced_Pension: 50, General_Pension: 40 } },
                    { text: "העברה בינדורית של כספי פנסיה וביטוח (ירושה פנסיונית)", scoreMap: { Intergenerational_Pension: 50, Pension_Inheritance: 50, Wills_Inheritance_Legal: 40, Power_Of_Attorney: 30 } },
                    { text: "תכנון נכסים ועיזבון (צוואות, ירושות, ייפויי כוח מתמשך)", scoreMap: { Wills_Inheritance_Legal: 50, Power_Of_Attorney: 50, Legal_Elderly: 40, Pension_Inheritance: 30 } }
                ]
            },
            {
                id: "Q3_EMP_SUP",
                question: "איזה סוג של ליווי תמיכתי הייתם מעוניינים לספק לעובדים הפורשים?",
                category: "EMPLOYEE_SUPPORT_PATH",
                answers: [
                    { text: "סדנאות הכנה רגשית וחברתית להתמודדות עם השינוי", scoreMap: { Emotional_Retirement_Prep: 50, Wellbeing_Retirement: 50, Coping_Change: 40, Employee_Support_Retirement: 30 } },
                    { text: "ייעוץ פרטני לתכנון פיננסי מקיף", scoreMap: { Financial_Retirement_Planning: 50, Retirement_Finance: 40, General_Pension: 30 } },
                    { text: "מידע מרוכז ומעודכן על כלל הזכויות וההטבות המגיעות להם", scoreMap: { Senior_Citizen_Benefits: 40, Social_Security_Benefits: 40, Elderly_Employee_Rights: 40, Third_Age_Rights: 40, Legal_Elderly: 30 } }
                ]
            },

            // Consultant Path Questions (these are the 4 questions after Q0)
            {
                id: "Q1_CONS",
                question: "כיועץ/ת, מהו התחום המבוקש ביותר מצד לקוחותיך הארגוניים בהקשר למעברי עובדים?",
                category: "CONSULTANT_PATH",
                answers: [
                    { text: "ליווי תהליכי סיום העסקה והשלכותיהם", scoreMap: { HR_Termination: 30, Legal_Employment: 30, Severance_Pay: 25, Termination_Rights_Legal: 25, Employment_Law_Termination: 25 } },
                    { text: "תכנון אסטרטגי והכנה כוללת לפרישת עובדים", scoreMap: { HR_Retirement_Planning: 30, Organizational_Retirement: 30, Retirement_Challenges: 25, Emotional_Retirement_Prep: 25, Financial_Retirement_Planning: 25 } },
                    { text: "מתן מענה לשאלות מורכבות בנושאי פנסיה וזכויות מבוגרים", scoreMap: { General_Pension: 25, Pension_Funds_Types: 25, Intergenerational_Pension: 25, Elderly_Employee_Rights: 25, Legal_Elderly: 25, Senior_Citizen_Benefits: 25, Wills_Inheritance_Legal: 25 } }
                ]
            },
            {
                id: "Q2_CONS",
                question: "אילו נושאים משפטיים/רגולטוריים מעסיקים את לקוחותיך ביותר בנוגע לעובדים מבוגרים/פורשים או בתהליכי סיום העסקה?",
                category: "CONSULTANT_PATH",
                answers: [
                    { text: "עדכוני חקיקה בדיני עבודה ופיצויי פיטורים", scoreMap: { Legal_Employment: 40, Employment_Law_Termination: 40, Severance_Pay: 35, Termination_Rights_Legal: 35 } },
                    { text: "ניהול מקרים מורכבים של זכויות גיל שלישי וייפוי כוח מתמשך", scoreMap: { Legal_Elderly: 40, Third_Age_Rights: 40, Wills_Inheritance_Legal: 40, Power_Of_Attorney: 40, Senior_Citizen_Benefits: 30 } },
                    { text: "סוגיות העברה בינדורית והשלכות מס בפנסיה", scoreMap: { Intergenerational_Pension: 35, Pension_Inheritance: 35, Financial_Retirement_Planning: 30, Advanced_Pension: 30 } }
                ]
            },
            {
                id: "Q3_CONS",
                question: "מהי היכולת העיקרית שתרצה/י לחזק בארגונים כדי לתמוך במעברי עובדים?",
                category: "CONSULTANT_PATH",
                answers: [
                    { text: "יכולת תכנון וביצוע של תהליכי פרישה ארגוניים", scoreMap: { HR_Retirement_Planning: 40, Organizational_Retirement: 40, HR_Retirement_Guidance: 30 } },
                    { text: "יכולת ליווי רגשי וניהול שינוי עבור העובדים", scoreMap: { Emotional_Retirement_Prep: 40, Coping_Change: 40, Wellbeing_Retirement: 30, Employee_Support_Retirement: 30 } },
                    { text: "יכולת הבנה ומתן מענה לסוגיות פנסיה ופיננסים", scoreMap: { Financial_Retirement_Planning: 40, Retirement_Finance: 40, General_Pension: 30, Pension_Funds_Types: 30, Advanced_Pension: 30 } }
                ]
            },

            // Other Path Questions (these are the 4 questions after Q0)
            {
                id: "Q1_OTHER",
                question: "בהקשר לתפקידך, מהו התחום הקשור לסיום/פרישה שבו היית רוצה להעשיר את הידע בארגון?",
                category: "OTHER_PATH",
                answers: [
                    { text: "נושאי פנסיה וביטוח פנסיוני", scoreMap: { General_Pension: 40, Finance_Basics: 40, Financial_Retirement_Planning: 35, Pension_Funds_Types: 35 } },
                    { text: "זכויות עובדים והיבטים משפטיים במעברים", scoreMap: { Legal_Employment: 35, Legal_Elderly: 35, Termination_Rights_Legal: 35, Employment_Law_Termination: 35, Elderly_Employee_Rights: 30, Third_Age_Rights: 30 } },
                    { text: "הכנה למעברים וניהול שינוי (היבטים ארגוניים ואישיים)", scoreMap: { Organizational_Retirement: 30, Coping_Change: 30, Emotional_Retirement_Prep: 30, Employee_Support_Retirement: 30 } }
                ]
            },
            {
                id: "Q2_OTHER",
                question: "איזו סוגייה פיננסית סביב סיום העסקה או פרישה היא בעלת החשיבות הגבוהה ביותר עבורך?",
                category: "OTHER_PATH",
                answers: [
                    { text: "הבנת חישובי פיצויי פיטורים וזכויות סיום העסקה", scoreMap: { Severance_Pay: 40, Legal_Employment: 35, Termination_Rights_Legal: 35, Employment_Law_Termination: 35 } },
                    { text: "תכנון פנסיוני ואופטימיזציית רווחה כלכלית בפרישה", scoreMap: { Financial_Retirement_Planning: 40, Retirement_Finance: 40, General_Pension: 35, Pension_Funds_Types: 35, Intergenerational_Pension: 30 } },
                    { text: "סוגיות מיסוי והעברה בינדורית של כספים", scoreMap: { Intergenerational_Pension: 35, Pension_Inheritance: 35, Wills_Inheritance_Legal: 30, Power_Of_Attorney: 30, Advanced_Pension: 30 } }
                ]
            },
            {
                id: "Q3_OTHER",
                question: "כיצד היית רוצה שהארגון יתמוך בעובדיו במעברים משמעותיים בקריירה/חיים?",
                category: "OTHER_PATH",
                answers: [
                    { text: "באמצעות ידע מקיף וכלים בתחום הפנסיה והזכויות", scoreMap: { General_Pension: 35, Financial_Retirement_Planning: 35, Elderly_Employee_Rights: 35, Legal_Elderly: 35, Social_Security_Benefits: 35 } },
                    { text: "באמצעות ליווי רגשי ותמיכה במעברים", scoreMap: { Emotional_Retirement_Prep: 35, Coping_Change: 35, Wellbeing_Retirement: 35, Employee_Support_Retirement: 35 } },
                    { text: "באמצעות ייעוץ משפטי והבטחת עמידה בחוק", scoreMap: { Legal_Employment: 35, Termination_Rights_Legal: 35, Employment_Law_Termination: 35, Wills_Inheritance_Legal: 35, Power_Of_Attorney: 35 } }
                ]
            },

            // Common Final Question (This will always be the 5th question in any path)
            {
                id: "Q_FINAL_COMMON",
                question: "מהי המטרה האסטרטגית העליונה של הארגון שלך בהשקעה בהכשרות אלו?",
                category: "COMMON",
                answers: [
                    { text: "הכשרת מנהלי משאבי אנוש ויצירת מומחיות פנים-ארגונית", scoreMap: { HR_General: 30, HR_Termination: 30, HR_Retirement_Planning: 30, HR_Retirement_Guidance: 30, Organizational_Retirement: 25, Legal_Employment: 25 } },
                    { text: "העצמת עובדים וסיוע להם במעברים חשובים בחיים", scoreMap: { Employee_Support_Retirement: 30, Emotional_Retirement_Prep: 30, Coping_Change: 25, Wellbeing_Retirement: 25, Financial_Retirement_Planning: 20, Retirement_Challenges: 20 } },
                    { text: "הבטחת עמידה בחוק ומיצוי זכויות עובדים", scoreMap: { Legal_Employment: 30, Severance_Pay: 30, Termination_Rights_Legal: 30, Employment_Law_Termination: 30, Elderly_Employee_Rights: 25, Third_Age_Rights: 25, Wills_Inheritance_Legal: 20, Power_Of_Attorney: 20 } },
                    { text: "שימור מוניטין הארגון כמעסיק הוגן, אחראי ותומך", scoreMap: { HR_General: 25, Organizational_Retirement: 25, Employment_Trends: 20, Employee_Support_Retirement: 20 } }
                ]
            }
        ];

        // Define the sequence of question IDs for each path. Each path will dynamically select 5 questions.
        // The values here are the IDs of the questions that will follow Q0.
        // For HR_INITIAL_CHOICE, the first question is Q_HR_INITIAL_CHOICE, and then its answer determines the next 3.
        const quizPaths = {
            // These paths define the 4 questions that follow Q0 directly (total 5 questions)
            "EMPLOYEE_SUPPORT_PATH": ["Q1_EMP_SUP", "Q2_EMP_SUP", "Q3_EMP_SUP", "Q_FINAL_COMMON"],
            "CONSULTANT_PATH": ["Q1_CONS", "Q2_CONS", "Q3_CONS", "Q_FINAL_COMMON"],
            "OTHER_PATH": ["Q1_OTHER", "Q2_OTHER", "Q3_OTHER", "Q_FINAL_COMMON"],

            // This path indicates that Q_HR_INITIAL_CHOICE will be the second question.
            // Its answer will then determine the *remaining 3 specific questions*.
            "HR_INITIAL_CHOICE": ["Q_HR_INITIAL_CHOICE"], // This defines that Q_HR_INITIAL_CHOICE is the next question.

            // These paths define the 3 questions that follow Q_HR_INITIAL_CHOICE (plus Q_FINAL_COMMON)
            // Total: Q0 + Q_HR_INITIAL_CHOICE + 3 questions from here + Q_FINAL_COMMON = 6.
            // No, the total should be Q0 + Q_HR_INITIAL_CHOICE + (3 specific questions) = 5. Q_FINAL_COMMON is always the last.
            // So these lists should only contain the 3 *specific* questions. Q_FINAL_COMMON will be added explicitly later.
            "HR_TERMINATION_FINAL_PATH": ["Q1_HR_TERM_SPEC", "Q2_HR_TERM_SPEC", "Q3_HR_TERM_SPEC"],
            "HR_RETIREMENT_FINAL_PATH": ["Q1_HR_RET_SPEC", "Q2_HR_RET_SPEC", "Q3_HR_RET_SPEC"],
            "HR_MIXED_FINAL_PATH": ["Q1_HR_MIX", "Q2_HR_MIX", "Q3_HR_MIX"]
        };

        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores answers for the *currently active* questionsForCurrentQuiz
        let questionsForCurrentQuiz = []; // The list of 5 questions for the current quiz session

        const quizQuestionDisplay = document.getElementById('quiz-question-display');
        const progressBarFill = document.getElementById('progress-bar-fill');
        const recommendationsSection = document.getElementById('recommendations');
        const topRecommendationList = document.getElementById('top-recommendation-list');
        const additionalRecommendationList = document.getElementById('additional-recommendation-list');

        /**
         * Updates the progress bar based on the current question index.
         */
        function updateProgressBar() {
            // Calculate progress based on the dynamic set of questions
            const progress = (currentQuestionIndex / questionsForCurrentQuiz.length) * 100;
            progressBarFill.style.width = `${progress}%`;
        }

        /**
         * A helper function to build the `questionsForCurrentQuiz` array and
         * correctly manage `userAnswers` when the quiz path changes.
         * @param {string[]} questionIds - An array of question IDs in the desired order.
         * @param {number} preserveCount - The number of initial answers to preserve from `userAnswers`.
         */
        function setQuizQuestionsAndAnswers(questionIds, preserveCount) {
            const preservedAnswers = userAnswers.slice(0, preserveCount);
            questionsForCurrentQuiz = questionIds.map(id => allPossibleQuestions.find(q => q.id === id));
            userAnswers = Array(questionsForCurrentQuiz.length).fill(null);
            // Restore preserved answers
            preservedAnswers.forEach((answer, index) => {
                if (answer !== null && index < userAnswers.length) {
                    userAnswers[index] = answer;
                }
            });
        }

        /**
         * Displays a single question from the `questionsForCurrentQuiz` array at the given index.
         * @param {number} index - The index of the question to display within `questionsForCurrentQuiz`.
         */
        function displayQuestion(index) {
            quizQuestionDisplay.innerHTML = '';
            recommendationsSection.classList.add('hidden');

            if (index < questionsForCurrentQuiz.length) {
                const q = questionsForCurrentQuiz[index];
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';

                questionCard.innerHTML = `
                    <p class="text-lg font-semibold text-gray-700 mb-4">${index + 1}. ${q.question}</p>
                    <div class="space-y-2">
                        ${q.answers.map((a, aIndex) => `
                            <label class="answer-option ${userAnswers[index] === aIndex ? 'selected' : ''}">
                                <input type="radio" name="question-${index}" value="${aIndex}" class="form-radio h-5 w-5 text-blue-600" ${userAnswers[index] === aIndex ? 'checked' : ''}>
                                <span class="ml-2 text-gray-700">${a.text}</span>
                            </label>
                        `).join('')}
                    </div>
                `;

                quizQuestionDisplay.appendChild(questionCard);
                setTimeout(() => {
                    questionCard.classList.add('fade-in');
                }, 10);

                questionCard.querySelectorAll(`input[name="question-${index}"]`).forEach(radio => {
                    radio.addEventListener('change', (event) => {
                        questionCard.querySelectorAll('.answer-option').forEach(option => {
                            option.classList.remove('selected');
                        });
                        event.target.closest('.answer-option').classList.add('selected');
                        handleAnswerSelection(index, parseInt(event.target.value));
                    });
                });
            }
            updateProgressBar();
        }

        /**
         * Handles the selection of an answer, stores it, and manages the quiz flow.
         * Dynamically adjusts the quiz path based on user's choices.
         * @param {number} qIndex - The index of the question answered within `questionsForCurrentQuiz`.
         * @param {number} aIndex - The index of the selected answer.
         */
        function handleAnswerSelection(qIndex, aIndex) {
            userAnswers[qIndex] = aIndex;

            const currentCard = quizQuestionDisplay.querySelector('.question-card');
            if (!currentCard) return;

            currentCard.classList.remove('fade-in');
            currentCard.classList.add('fade-out');

            setTimeout(() => {
                let nextPathKey = null; // Stores the next path segment to determine future questions

                if (qIndex === 0) { // Answered Q0 (main role/focus)
                    const q0Answer = allPossibleQuestions.find(q => q.id === "Q0").answers[aIndex];
                    nextPathKey = q0Answer.focus;

                    if (nextPathKey === "HR_INITIAL_CHOICE") {
                        // If HR is chosen, the next question is Q_HR_INITIAL_CHOICE.
                        // We set up Q0 and Q_HR_INITIAL_CHOICE. The remaining 3 specific questions
                        // and Q_FINAL_COMMON will be added after Q_HR_INITIAL_CHOICE is answered.
                        const hrInitialChoiceQ = allPossibleQuestions.find(q => q.id === "Q_HR_INITIAL_CHOICE");
                        // Create a temporary questionsForCurrentQuiz containing Q0 and Q_HR_INITIAL_CHOICE,
                        // followed by placeholder questions (e.g., from HR_MIXED_FINAL_PATH as a default)
                        // to ensure it has 5 slots for progress bar calculation.
                        const tempPathIds = ["Q0", "Q_HR_INITIAL_CHOICE"].concat(quizPaths["HR_MIXED_FINAL_PATH"]).concat("Q_FINAL_COMMON");
                        setQuizQuestionsAndAnswers(tempPathIds, 1); // Preserve Q0 answer
                        currentQuestionIndex = 1; // Move to Q_HR_INITIAL_CHOICE
                    } else {
                        // For other paths, build the full 5 questions directly: Q0 + 4 specific questions + Q_FINAL_COMMON
                        const pathQuestionsIds = ["Q0"].concat(quizPaths[nextPathKey]);
                        setQuizQuestionsAndAnswers(pathQuestionsIds, 1); // Preserve Q0 answer
                        currentQuestionIndex = 1; // Move to the first content question after Q0
                    }

                } else if (questionsForCurrentQuiz[qIndex].id === "Q_HR_INITIAL_CHOICE") { // Answered Q_HR_INITIAL_CHOICE (HR specific focus)
                    const qHrInitial = allPossibleQuestions.find(q => q.id === "Q_HR_INITIAL_CHOICE");
                    const subPathFocus = qHrInitial.answers[aIndex].focus; // e.g., "HR_TERMINATION_FINAL_PATH"

                    // Build the full 5-question path: Q0, Q_HR_INITIAL_CHOICE, 3 specific questions from subPathFocus, and Q_FINAL_COMMON
                    const specificQuestionsIds = quizPaths[subPathFocus]; // This will give 3 specific question IDs
                    const finalPathIds = ["Q0", "Q_HR_INITIAL_CHOICE"].concat(specificQuestionsIds).concat("Q_FINAL_COMMON");
                    
                    setQuizQuestionsAndAnswers(finalPathIds, 2); // Preserve Q0 and Q_HR_INITIAL_CHOICE answers
                    currentQuestionIndex = 2; // Move to the first specific HR sub-path question (index 2)

                } else { // Normal progression for any path (not a decision point)
                    currentQuestionIndex++;
                }

                // After updating currentQuestionIndex, check if there are more questions or if quiz is finished
                if (currentQuestionIndex < questionsForCurrentQuiz.length) {
                    displayQuestion(currentQuestionIndex);
                } else {
                    quizQuestionDisplay.innerHTML = '';
                    calculateRecommendations();
                }
            }, 300); // Matches CSS transition duration
        }

        /**
         * Calculates course recommendations based on user answers.
         */
        function calculateRecommendations() {
            const courseScores = {};
            courses.forEach(course => {
                courseScores[course.name] = 0;
            });

            userAnswers.forEach((answerIndex, qIndex) => {
                if (answerIndex !== null) {
                    // Ensure the question at qIndex exists in questionsForCurrentQuiz
                    // This check prevents errors if userAnswers array somehow gets out of sync
                    // with questionsForCurrentQuiz which should now be of fixed size 5.
                    if (questionsForCurrentQuiz[qIndex] && questionsForCurrentQuiz[qIndex].answers[answerIndex]) {
                        const scoreMap = questionsForCurrentQuiz[qIndex].answers[answerIndex].scoreMap;

                        for (const course of courses) {
                            for (const tag of course.tags) {
                                if (scoreMap[tag]) {
                                    courseScores[course.name] += scoreMap[tag];
                                }
                            }
                        }
                    }
                }
            });

            // Theoretical maximum score adjusted for reliability based on the updated scoring.
            // A perfect match across 5 questions with potential 50 points per question (for specific courses)
            // or 25-40 for initial filter questions.
            // Setting theoreticalMaxCourseScore to 250 (max possible from tags).
            const theoreticalMaxCourseScore = 250; 

            const rankedCourses = Object.entries(courseScores).map(([name, score]) => {
                const percentage = Math.min(100, Math.round((score / theoreticalMaxCourseScore) * 100));
                return { name, percentage };
            });

            rankedCourses.sort((a, b) => b.percentage - a.percentage);

            const topRecommendations = rankedCourses.filter(rec => rec.percentage >= 70).slice(0, 5);
            // Get courses that are not in topRecommendations, sorted by their percentage
            const additionalRecommendations = rankedCourses.filter(rec => !topRecommendations.some(top => top.name === rec.name));
            
            displayRecommendations(topRecommendations, additionalRecommendations);
        }

        /**
         * Displays the final course recommendations, separated into top and additional lists.
         * @param {Array<Object>} topRecs - An array of top recommended course objects.
         * @param {Array<Object>} additionalRecs - An array of additional recommended course objects.
         */
        function displayRecommendations(topRecs, additionalRecs) {
            topRecommendationList.innerHTML = '';
            additionalRecommendationList.innerHTML = '';
            
            if (topRecs.length > 0) {
                topRecs.forEach((rec, index) => {
                    const recCard = document.createElement('div');
                    recCard.className = 'recommendation-card';
                    recCard.innerHTML = `
                        <span class="course-name">${rec.name}</span>
                        <span class="match-percentage">${rec.percentage}% התאמה</span>
                    `;
                    topRecommendationList.appendChild(recCard);
                    setTimeout(() => {
                        recCard.classList.add('show');
                    }, 50 * index); 
                });
            } else {
                topRecommendationList.innerHTML = '<p class="text-gray-600 text-center">לא נמצאו המלצות קורסים באחוז התאמה של 70% ומעלה על פי בחירותיך.</p>';
            }

            if (additionalRecs.length > 0) {
                // For additional courses, do not display percentage.
                additionalRecs.forEach((rec, index) => {
                    const recCard = document.createElement('div');
                    recCard.className = 'recommendation-card';
                    recCard.innerHTML = `
                        <span class="course-name">${rec.name}</span>
                        <!-- Percentage intentionally removed for additional courses -->
                    `;
                    additionalRecommendationList.appendChild(recCard);
                    setTimeout(() => {
                        recCard.classList.add('show');
                    }, 50 * index); 
                });
            } else if (topRecs.length > 0) {
                additionalRecommendationList.innerHTML = '<p class="text-gray-600 text-center">אין קורסים נוספים מתאימים.</p>';
            }
            
            recommendationsSection.classList.remove('hidden');
        }

        // Initial setup when the page loads: Display the very first question (Q0)
        document.addEventListener('DOMContentLoaded', () => {
            // Start with only Q0 in the quiz sequence. The rest will be determined dynamically.
            // We temporarily add dummy questions to 'questionsForCurrentQuiz' to ensure its length is 5 initially
            // for correct progress bar calculation. These will be replaced.
            const initialTempPath = ["Q0", "Q1_HR_TERM_SPEC", "Q2_HR_TERM_SPEC", "Q3_HR_TERM_SPEC", "Q_FINAL_COMMON"];
            setQuizQuestionsAndAnswers(initialTempPath, 0); 
            currentQuestionIndex = 0;
            displayQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>
